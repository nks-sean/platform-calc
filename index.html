<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Shopee Fee & Profit Calculator — Malaysia (2025)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <!-- LEFT: inputs -->
    <div class="card">
      <h1>Shopee Profit Calculator</h1>
      <div class="sub">Malaysia — includes SST (8%) on Shopee fees. Rates are editable — keep updated.</div>

      <!-- Product Details -->
      <div class="section">
        <h3 style="margin:0 0 8px">Product details</h3>
        <div class="grid-2">
          <div>
            <label>Category <span class="tiny">(auto sets commission)</span></label>
            <select id="category" onchange="onCategoryChange()"></select>
            <div id="categoryNote" class="inline-help"></div>
          </div>
          <div>
            <label>Quantity</label>
            <input type="number" id="quantity" value="1" min="1" />
          </div>
        </div>

        <div style="margin-top:8px" class="grid-2">
          <div>
            <label>Selling price (RM)</label>
            <input type="number" id="sellingPrice" step="0.01" value="100" />
          </div>
          <div>
            <label>Cost price (RM)</label>
            <input type="number" id="productCost" step="0.01" value="60" />
          </div>
        </div>
      </div>

      <!-- Program participation -->
      <div class="section">
        <h3 style="margin:0 0 8px">Program participation</h3>

        <div class="checkbox"><input id="freeShipChk" type="checkbox" onchange="toggleFreeShip()"/><label for="freeShipChk" style="margin:0;font-weight:600">Joined Free Shipping Program</label></div>
        <div id="freeShipInput" style="display:none;margin-bottom:8px">
          <label>Seller shipping contribution (RM)</label>
          <input type="number" id="sellerShipContribution" step="0.01" value="4.00" />
          <div class="tiny">Average seller subsidy per order if joined free-shipping (e.g. RM4).</div>
        </div>

        <div class="checkbox"><input id="coinsChk" type="checkbox" onchange="toggleCoins()"/><label for="coinsChk" style="margin:0;font-weight:600">Joined Shopee Coins Cashback Program</label></div>
        <div id="coinsInput" style="display:none;margin-bottom:8px">
          <label>Coins cashback rate (%)</label>
          <input type="number" id="coinsRate" step="0.1" value="1.0" />
          <div class="tiny">% of selling price given back as Shopee Coins (seller cost).</div>
        </div>

        <div style="margin-top:8px">
          <label>Seller voucher given (RM)</label>
          <input type="number" id="voucherValue" step="0.01" value="0.00" />
          <div class="tiny">Any seller voucher paid by you (deducted before commission).</div>
        </div>
      </div>

      <!-- Shopee fee settings -->
      <div class="section">
        <h3 style="margin:0 0 8px">Shopee fee settings (editable)</h3>

        <div class="grid-2">
          <div>
            <label>Commission rate (%)</label>
            <input type="number" id="commissionRate" step="0.01" />
            <div class="tiny">Commission is calculated on (Selling price − Seller voucher).</div>
          </div>
          <div>
            <label>Transaction fee rate (%)</label>
            <input type="number" id="transactionRate" step="0.01" value="3.78" />
          </div>
        </div>

        <div class="grid-2" style="margin-top:8px">
          <div>
            <label>Payment fee rate (%)</label>
            <input type="number" id="paymentRate" step="0.01" value="2.00" />
          </div>
          <div>
            <label>Platform support fee (RM per order)</label>
            <input type="number" id="platformFee" step="0.01" value="0.50" />
          </div>
        </div>

        <div style="margin-top:8px">
          <label>SST rate (%)</label>
          <input type="number" id="sstRate" step="0.01" value="8.00" />
        </div>
      </div>

      <!-- actions -->
      <div class="section" style="display:flex;gap:12px;align-items:center">
        <button class="primary" onclick="calculateAndShow()">Calculate / Refresh</button>
        <button class="ghost" onclick="resetToDefaults()">Reset</button>
      </div>
      <div class="footer tiny">Tip: Update rates from Seller Centre for accuracy.</div>
    </div>

    <!-- RIGHT: results -->
    <div class="card">
      <h3 style="margin:0 0 8px">Result — breakdown</h3>
      <div class="results" id="resultsPanel">
        <div class="result-line"><div class="muted">Gross revenue</div><div id="grossRevenue">RM0.00</div></div>
        <div class="result-line"><div class="muted">Seller voucher</div><div id="voucherCost">RM0.00</div></div>
        <div class="result-line"><div class="muted">Commission</div><div id="commissionFee">RM0.00</div></div>
        <div class="result-line"><div class="muted">Transaction fee</div><div id="transactionFee">RM0.00</div></div>
        <div class="result-line"><div class="muted">Payment fee</div><div id="paymentFee">RM0.00</div></div>
        <div class="result-line"><div class="muted">Platform support fee</div><div id="platformFeeResult">RM0.00</div></div>
        <div class="result-line"><div class="muted">SST on Shopee fees</div><div id="sstAmount">RM0.00</div></div>
        <div class="result-line"><div class="muted">Coins cashback</div><div id="coinsCost">RM0.00</div></div>
        <div class="result-line"><div class="muted">Shipping subsidy</div><div id="shipSubsidy">RM0.00</div></div>

        <div class="result-line total danger"><div>Total Shopee & program costs</div><div id="totalShopeeCosts">RM0.00</div></div>
        <div class="result-line danger"><div>Product cost</div><div id="productCostResult">RM0.00</div></div>
        <div class="result-line total danger"><div>Total expenses</div><div id="totalExpense">RM0.00</div></div>

        <div class="result-line"><div>Net profit</div><div id="netProfit" class="big">RM0.00</div></div>
        <div class="result-line"><div>Profit margin</div><div id="profitMargin">0.00%</div></div>
      </div>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>
